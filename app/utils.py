import random
from enum import Enum
from typing import Sequence

from app.store.database.sqlalchemy_base import (
    AnswerModel,
    ParticipantModel,
    QuestionModel,
    ThemeModel,
)


class Constants:
    TOKEN = '7672228221:AAGQstNZ4c4r30Ld6gqLAF-7yxmWSFJN-4Y'
    BOT_ID = 7672228221
    MAX_ANSWER_TIME = 180
    GREETING = (
        "–ü—Ä–∏–≤–µ—Ç! –Ø –±–æ—Ç –£–º–Ω–∏–∫–∏ –∏ –£–º–Ω–∏—Ü—ã, –∏ —Ä–∞–¥ –±—ã—Ç—å –∑–¥–µ—Å—å!\n"
        "–ß—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –∏–≥—Ä—É, –Ω–∞–ø–∏—à–∏ –∫–æ–º–∞–Ω–¥—É /start@SmartGirls_SmartBoys_Bot. –°–ª–µ–¥—É–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º, –∏ –º—ã –Ω–∞—á–Ω–µ–º!\n\n"
        "–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:\n\n"
        "1. –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã –∏ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ:\n"
        "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —á–∞—Ç–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç –∏–≥—Ä—É, –ø–æ—Å–ª–µ —á–µ–≥–æ –∫–∞–∂–¥—ã–π –∏–≥—Ä–æ–∫ –º–æ–∂–µ—Ç –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è, –Ω–∞–ø–∏—Å–∞–≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ç–µ–≥. "
        "–í –∏–≥—Ä–µ –º–æ–∂–µ—Ç —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –º–∞–∫—Å–∏–º—É–º 3 –∏–≥—Ä–æ–∫–∞.\n\n"
        "2. –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —É—Ä–æ–≤–Ω–µ–π:\n"
        "–ë–æ—Ç —Å–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –Ω–∞–∑–Ω–∞—á–∞–µ—Ç –∫–∞–∂–¥–æ–º—É –∏–≥—Ä–æ–∫—É —É—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –æ—Ç 2 –¥–æ 4.\n"
        "–£—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –∏–≥—Ä–æ–∫ –¥–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—Ç–∏—Ç—å:\n"
        "   - –£—Ä–æ–≤–µ–Ω—å 2 ‚Äî 2 –≤–æ–ø—Ä–æ—Å–∞\n"
        "   - –£—Ä–æ–≤–µ–Ω—å 3 ‚Äî 3 –≤–æ–ø—Ä–æ—Å–∞\n"
        "   - –£—Ä–æ–≤–µ–Ω—å 4 ‚Äî 4 –≤–æ–ø—Ä–æ—Å–∞\n\n"
        "3. –®—Ç—Ä–∞—Ñ–Ω—ã–µ –æ—á–∫–∏:\n"
        "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –æ—à–∏–±–æ–∫ (—à—Ç—Ä–∞—Ñ–Ω—ã—Ö –æ—á–∫–æ–≤) —É –∫–∞–∂–¥–æ–≥–æ –∏–≥—Ä–æ–∫–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —É—Ä–æ–≤–Ω—è —Å–ª–æ–∂–Ω–æ—Å—Ç–∏:\n"
        "   - –ò–≥—Ä–æ–∫–∏ —Å —É—Ä–æ–≤–Ω–µ–º 2 –Ω–µ –∏–º–µ—é—Ç —à—Ç—Ä–∞—Ñ–Ω—ã—Ö –æ—á–∫–æ–≤ –∏ –¥–æ–ª–∂–Ω—ã –æ—Ç–≤–µ—Ç–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞ –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã.\n"
        "   - –ò–≥—Ä–æ–∫–∏ —Å —É—Ä–æ–≤–Ω–µ–º 3 –º–æ–≥—É—Ç –æ—à–∏–±–∏—Ç—å—Å—è –æ–¥–∏–Ω —Ä–∞–∑ (1 —à—Ç—Ä–∞—Ñ–Ω–æ–µ –æ—á–∫–æ).\n"
        "   - –ò–≥—Ä–æ–∫–∏ —Å —É—Ä–æ–≤–Ω–µ–º 4 –º–æ–≥—É—Ç –æ—à–∏–±–∏—Ç—å—Å—è –¥–≤–∞–∂–¥—ã (2 —à—Ç—Ä–∞—Ñ–Ω—ã—Ö –æ—á–∫–∞).\n\n"
        "4. –í—ã–±—ã–≤–∞–Ω–∏–µ:\n"
        "–ï—Å–ª–∏ –∏–≥—Ä–æ–∫ –∏—Å—á–µ—Ä–ø—ã–≤–∞–µ—Ç —Å–≤–æ–∏ —à—Ç—Ä–∞—Ñ–Ω—ã–µ –æ—á–∫–∏, –æ–Ω –≤—ã–±—ã–≤–∞–µ—Ç –∏–∑ –∏–≥—Ä—ã.\n\n"
        "5. –ü–æ–±–µ–¥–∞:\n"
        "–ò–≥—Ä–∞ —Å–æ—Å—Ç–æ–∏—Ç –º–∞–∫—Å–∏–º—É–º –∏–∑ 4 —Ä–∞—É–Ω–¥–æ–≤ ‚Äî –≤ –∫–∞–∂–¥–æ–º —Ä–∞—É–Ω–¥–µ –∑–∞–¥–∞–µ—Ç—Å—è –æ–¥–∏–Ω –≤–æ–ø—Ä–æ—Å –∫–∞–∂–¥–æ–º—É –∏–≥—Ä–æ–∫—É. "
        "–ò–≥—Ä–∞ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –∫—Ç–æ-—Ç–æ —É—Å–ø–µ—à–Ω–æ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã, –¥–æ–ø—É—Å—Ç–∏–≤ –ø—Ä–∏ —ç—Ç–æ–º –Ω–µ –±–æ–ª—å—à–µ —à—Ç—Ä–∞—Ñ–Ω—ã—Ö –æ—á–∫–æ–≤, —á–µ–º —ç—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –µ–≥–æ —É—Ä–æ–≤–µ–Ω—å. "
        "–≠—Ç–æ—Ç –∏–≥—Ä–æ–∫ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–º!\n\n"
        "–ù–∞–ø–∏—à–∏ /start@SmartGirls_SmartBoys_Bot, —á—Ç–æ–±—ã –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∏ –Ω–∞—á–∞—Ç—å –∏–≥—Ä—É! üéâ"
    )
    DEFAULT_ANSWER_TIME = 30


class HelperFunctions:

    def get_random_level(participants: Sequence[ParticipantModel]) -> int:
        available_numbers = [2, 3, 4]
        for participant in participants:
            available_numbers.remove(participant.level)
        return random.choice(available_numbers)

    def get_level_title(level: int) -> str:
        match level:
            case 2:
                return "–ö—Ä–∞—Å–Ω–∞—è –¥–æ—Ä–æ–∂–∫–∞üî¥"
            case 3:
                return "–ñ–µ–ª—Ç–∞—è –¥–æ—Ä–æ–∂–∫–∞üü°"
            case 4:
                return "–ó–µ–ª–µ–Ω–∞—è –¥–æ—Ä–æ–∂–∫–∞üü¢"

    def get_random_theme(themes: Sequence[ThemeModel]) -> ThemeModel:
        return random.choice(themes)

    def get_random_question(questions: Sequence[QuestionModel]) -> QuestionModel:
        return random.choice(questions)

    def create_keyboard(answers: Sequence[AnswerModel]):
        shuffled_answers = list(answers)
        random.shuffle(shuffled_answers)

        result = {
            "inline_keyboard": []
        }
        for answer in shuffled_answers:
            result["inline_keyboard"].append([{"text": answer.title, "callback_data": str(answer.id)}])

        return result

    def convert_number_to_smile(number: int) -> str:
        number_to_smile = {
            1: "1Ô∏è‚É£",
            2: "2Ô∏è‚É£",
            3: "3Ô∏è‚É£",
            4: "4Ô∏è‚É£",
            5: "5Ô∏è‚É£",
            6: "6Ô∏è‚É£",
            7: "7Ô∏è‚É£",
            8: "8Ô∏è‚É£",
            9: "9Ô∏è‚É£",
            0: "0Ô∏è‚É£"
        }
        return number_to_smile[int(number)]

